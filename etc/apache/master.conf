<VirtualHost 127.10.0.2:443>
  ServerName tsadm.local

  SSLEngine on
  SSLProtocol all -SSLv2

  SSLCertificateFile    /opt/dev/tsadm/etc/certs/tsadm.local.pem
  SSLCertificateKeyFile /opt/dev/tsadm/etc/certs/tsadm.local.pem

  SSLCACertificateFile  /opt/dev/tsadm/etc/certs/tsadmca.pem
  SSLCARevocationFile   /opt/dev/tsadm/etc/certs/tsadmca-crl.pem

  SSLVerifyClient require
  SSLOptions +ExportCertData

  SSLVerifyDepth 1

  DocumentRoot /opt/dev/tsadm
  <Directory /opt/dev/tsadm/static>
    AllowOverride None
    Order Allow,Deny
    Allow from all
    DirectoryIndex /
  </Directory>

  Alias /robots.txt /opt/dev/tsadm/static/robots.txt
  Alias /favicon.ico /opt/dev/tsadm/static/favicon.png
  Alias /static/ /opt/dev/tsadm/static/
  Alias /server-graphs/ /srv/munin/www/

  <Location />
    SetHandler uwsgi-handler
    uWSGISocket /run/uwsgi/app/tsadm/socket
    uWSGIForceWSGIScheme https
    uWSGIForceCGIMode off
  </Location>

  <Location /static>
    SetHandler none
  </Location>
  <LocationMatch "/(robots.txt|favicon.ico)">
    SetHandler none
  </LocationMatch>

</VirtualHost>
