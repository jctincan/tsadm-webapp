<VirtualHost 10.0.3.100:443>
  ServerName master.tsadm.local

  SSLEngine on
  SSLProtocol all -SSLv2

  SSLCertificateFile    /opt/tsadmtest/webapp/etc/certs/tsadm.local.pem
  SSLCertificateKeyFile /opt/tsadmtest/webapp/etc/certs/tsadm.local.pem

  SSLCACertificateFile  /opt/tsadmtest/webapp/etc/certs/tsadmca.pem
  SSLCARevocationFile   /opt/tsadmtest/webapp/etc/certs/tsadmca-crl.pem

  SSLVerifyClient require
  SSLOptions +ExportCertData

  SSLVerifyDepth 1

  DocumentRoot /opt/tsadmtest/webapp
  <Directory /opt/tsadmtest/webapp/static>
    AllowOverride None
    Order Allow,Deny
    Allow from all
    DirectoryIndex /
  </Directory>

  Alias /robots.txt /opt/tsadmtest/webapp/static/robots.txt
  Alias /favicon.ico /opt/tsadmtest/webapp/static/favicon.png
  Alias /static/ /opt/tsadmtest/webapp/static/
  Alias /server-graphs/ /srv/munin/www/

  <Location />
    SetHandler uwsgi-handler
    uWSGISocket /run/uwsgi/app/tsadmtest/socket
    uWSGIForceWSGIScheme https
    uWSGIForceCGIMode off
    SetEnv TSADM_MODE test
  </Location>

  <Location /static>
    SetHandler none
  </Location>
  <LocationMatch "/(robots.txt|favicon.ico)">
    SetHandler none
  </LocationMatch>

</VirtualHost>
